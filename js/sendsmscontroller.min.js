function toggleAPIKey(e,s,a,t,i){e.preventDefault(),$("#apiKey").val()==s?($("#apiKey").attr("value",a),$("#smsify_toggle_key").html(i)):($("#apiKey").attr("value",s),$("#smsify_toggle_key").html(t))}function smsify_setDateTime(e,s){if(moment(s).isValid()){var a=moment.utc(s).toDate();$("#"+e).html(moment(a).format("dddd, DD/MMMM h:mm A"))}else $("#"+e).html("N/A")}function smsify_setDateTimeYear(e,s){if(moment(s).isValid()){var a=moment.utc(s).toDate();$("#"+e).html(moment(a).format("ddd, DD/MMM/YYYY h:mm A"))}else $("#"+e).html("N/A")}$=jQuery,$(document).ready(function(){function e(e){var s=$.parseJSON(e),a="";a=1==s.status?"updated":"error",d(s.message,a)}function s(e){var s=$.parseJSON(e),a="error";d(s.message,a),console.log(e)}function a(e){var s=$.parseJSON(e),a="";a=1==s.status?"updated":"error",n(),l(s.message,a,!0)}function t(e){var s=$.parseJSON(e),a="error";l(s.message,a,!0)}function i(){$(".smsify-send .form-table").hide(),$(".smsify-confirmation").hide(),$(".smsify-sending").show()}function m(e){$("."+e).show()}function n(){$(".smsify-spinner").hide()}function r(e){$("#"+e).hide()}function d(e,s){$(".smsify-sending").hide(),$(".smsify-send .form-table").show(),$(".smsify-confirmation").addClass(s),$(".smsify-confirmation").html("<p>"+e+"</p>"),$(".smsify-confirmation").show()}function l(e,s,a){a&&alert(e),$(".smsify-message").show(),$(".smsify-message").addClass(s),$(".smsify-message").html("<p>"+e+"</p>")}function o(e,s){return new Date(e.getTime()+6e4*s)}jQuery("#smsify-schedule-date").datepicker({dateFormat:"dd-M-yy",minDate:0,maxDate:365}),$("#smsify-scheduler").click(function(e){e.target.checked?($(".smsify-scheduleblock").show(),$(".smsify-scheduleblock").show()):($(".smsify-scheduleblock").hide(),$(".smsify-scheduleblock").hide())}),$(".smsify-deleteschedule").click(function(e){var s=e.currentTarget.id;if(confirm("Are you sure you want to delete this scheduled SMS?")){var i={action:"smsify_sms_remove_schedule_handler",method:"destroySchedule",task_id:s};r(s),m("spinner_"+s),$.ajax({url:ajaxurl,type:"POST",data:i,success:a,error:t})}}),$(".smsify-send-group-sms").click(function(a){a.preventDefault();var t=$("#edittag").find('input[name="tag_ID"]').val(),m=$("#edittag").find('input[name="taxonomy"]').val(),n=$("#smsify_message").val(),r=$("#smsify_sender_id").val(),d=$("#smsify-scheduler").prop("checked"),l=$("#smsify-schedule-date").val(),u=$("#smsify-schedule-time").val(),f=3600*$("#run_every").val()*24,c=$("#run_times").val(),y="",h=$("#smsify_confirmation").val();if(d&&""!=l&&""!=u)var _=new Date(l),y=o(_,u);d=d?1:0;var v={action:"smsify_sms_group_handler",method:"sendBulkSMS",message:n,taxonomy:m,tag_id:t,scheduler:d,run_every:f,run_times:c,schedule_date_time:y};r&&(v.sender_id=r),confirm(h)&&(i(),$.ajax({url:ajaxurl,type:"POST",data:v,success:e,error:s}))}),$(".smsify-sendsms").click(function(a){a.preventDefault(),i();var t=$("#user_id").val(),m=$("#first_name").val(),n=$("#last_name").val(),r=$("#smsify_mobile").val(),d=$("#smsify_message").val(),l=$("#smsify_sender_id").val(),u=$("#smsify-scheduler").prop("checked"),f=$("#smsify-schedule-date").val(),c=$("#smsify-schedule-time").val(),y=3600*$("#run_every").val()*24,h=$("#run_times").val(),_="";if(u&&""!=f&&""!=c)var v=new Date(f),_=o(v,c);u=u?1:0;var p={action:"smsify_sms_handler",method:"sendBulkSMS",user_id:t,first_name:m,last_name:n,send_to:r,scheduler:u,run_every:y,run_times:h,schedule_date_time:_,message:d};l&&(p.sender_id=l),$.ajax({url:ajaxurl,type:"POST",data:p,success:e,error:s})})});